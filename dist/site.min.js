!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function i(e,t){document.cookie=e+"="+t+";expires=Fri, 31 Dec 9999 23:59:59 GMT"}function o(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:"{}"}n.__esModule=!0,n.default={set:i,get:o}},{}],2:[function(e,t,n){"use strict";function i(e){var t="https://www.youtube.com/embed/"+e.id+"?autoplay=1&autohide=1";$(e).data("params")&&(t+="&"+$(this).data("params"));var n=$("<iframe/>",{frameborder:"0",src:t,width:$(e).width(),height:$(e).height()});n.attr("allowfullscreen","allowfullscreen"),$(e).replaceWith(n)}function o(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return e.match(t)?RegExp.$1:null}function r(e,t){var n=o(e);if(!n)return t;var i="background-image: url(https://img.youtube.com/vi/"+n+"/mqdefault.jpg);";return"<div id='"+n+"' class='youtube' style='"+i+"' onclick='$site.Utils.playYoutube(this);'><div class='play'></div></div>"}function a(e){var t=e.toLocaleLowerCase(),n=e;0==t.indexOf("http://")?n=e.substr(7):0==t.indexOf("https://")&&(n=e.substr(8));var i=n.toLocaleLowerCase(),a=i.split(".").pop();return a in l?"<a href='"+e+"' target='_blank'><img src='"+e+"' style='max-width: 400px; max-height: 300px;'></a>":a in u?"<audio controls><source src='"+e+"'></audio>":null!=o(n)?r(n,null):null}function s(e){for(var t=e,n=t.indexOf("<a href=");n>=0;){var i=t.indexOf("</a>",n);if(i<0)break;var o=n+9,r=t.indexOf('"',o+1);if(r>0){var s=t.substring(o,r),l=a(s);null!=l&&(t=t.substring(0,n)+l+t.substring(i+4),i=n+l.length)}n=t.indexOf("<a href=",i)}return t}var l={};l.png=!0,l.jpg=!0,l.gif=!0;var u={};u.mp3=!0,u.wav=!0,u.ogg=!0,n.__esModule=!0,n.default={processMediaLinks:s,playYoutube:i}},{}],3:[function(e,t,n){window.Parsley&&(window.Parsley.addMessages("ru",{defaultMessage:"Некорректное значение.",type:{email:"Введите адрес электронной почты.",url:"Введите URL адрес.",number:"Введите число.",integer:"Введите целое число.",digits:"Введите только цифры.",alphanum:"Введите буквенно-цифровое значение."},notblank:"Это поле должно быть заполнено.",required:"Обязательное поле.",pattern:"Это значение некорректно.",min:"Это значение должно быть не менее чем %s.",max:"Это значение должно быть не более чем %s.",range:"Это значение должно быть от %s до %s.",minlength:"Это значение должно содержать не менее %s символов.",maxlength:"Это значение должно содержать не более %s символов.",length:"Это значение должно содержать от %s до %s символов.",mincheck:"Выберите не менее %s значений.",maxcheck:"Выберите не более %s значений.",check:"Выберите от %s до %s значений.",equalto:"Это значение должно совпадать."}),window.Parsley.setLocale("ru"))},{}],4:[function(e,t,n){"use strict";function i(){var e=$("#sidebar"),t=e.find("li").last(),n=t.offset().top+t.height();return e.offset().top+e.height()-n}function o(){function e(){return n.height()>=50}var t=$("#sidebar"),n=t.find("img"),o=t.find(".sidebar-spacer"),r=t.find(".sidebar-menu-text");!e()&&i()>=20*n.length&&(n.height(50),n.width(50),t.css("width",80),$("#content-block").css("padding-left",80)),!r.is(":visible")&&e()&&i()>=100&&(r.show(),t.find("a").css("margin-bottom","5")),!o.is(":visible")&&r.is(":visible")&&i()>=150&&o.show(),o.is(":visible")&&i()<0&&o.hide(),r.is(":visible")&&i()<0&&(t.find("a").css("margin-bottom","0"),r.hide()),e()&&i()<0&&(n.height(30),n.width(30),t.css("width",50),$("#content-block").css("padding-left",50))}function r(){$(document).ready(o),$(window).resize(o)}n.__esModule=!0,n.default={initSidebar:r}},{}],5:[function(e,t,n){"use strict";n.__esModule=!0,n.default={Tuner:void 0,Utils:void 0,SongView:void 0}},{}],6:[function(e,t,n){(function(t){"use strict";function i(e,t,n){n=n?n:window.document.body,g(n).find(e).each(function(){g(this).attr("title")||g(this).attr("title",t)})}function o(e,t){var n=new w({urls:{schemeMatches:!0,wwwMatches:!0,tldMatches:!0},email:!0,phone:!0,hashtag:!1,stripPrefix:!0,newWindow:!0,truncate:{length:60,location:"end"},className:""}),i=n.link(e);if(t&&t.skipMediaLinks)return i;try{return y.default.processMediaLinks(i)}catch(e){return log.error(e),i}}function r(e,t){13===e.which&&(g(t).focus(),e.preventDefault())}function a(e,t){var n=e.which?e.which:e.keyCode;10!==n&&13!==n||e.ctrlKey||(g(t).click(),e.preventDefault())}function s(e,t){var n=e.which?e.which:e.keyCode;10!==n&&13!==n||!e.ctrlKey||(g(t).click(),e.preventDefault())}function l(e,t){var n=e?e:window.event;return n&&n.stopPropagation&&n.stopPropagation(),n&&n.cancelBubble&&(n.cancelBubble=!0),g("#"+t).dropdown("toggle"),!1}function u(e){var t=new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)");return decodeURIComponent((t.exec(location.search)||[void 0,""])[1].replace(/\+/g,"%20"))||void 0}function d(e,t,n,i,o){var r=function(){var r=i-e.val().length;r<=o?t.html(""+r):t.html(""),r<0?(t.css("color","red"),n&&n.attr("disabled","")):(t.css("color","inherit"),n&&n.removeAttr("disabled"))};e.keyup(r),r()}function c(){g(document).ready(function(){var e=g("#back-top");e&&(e.hide(),g(function(){g(window).scroll(function(){g(this).scrollTop()>100?g("#back-top").fadeIn():g("#back-top").fadeOut()}),g("#back-top").find("a").click(function(){return g("body,html").animate({scrollTop:0},500),!1})}))})}function f(e){var t=g(e).parsley();t.removeError("server-side-parsley-error")}function h(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}}function p(){var e=g(".song-block");if(0!=e.length){if(0==m.length){for(var t=0;t<e.length;t++)m.push(t);h(m)}var n=m.pop(),i=g(e.get(n)),o=i.offset();g("html, body").animate({scrollTop:o.top})}}function v(e){var t=g(e),n=t.offset();g("html, body").animate({scrollTop:n.top})}var g="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,w="undefined"!=typeof window?window.Autolinker:"undefined"!=typeof t?t.Autolinker:null,y=e("./links"),b=e("./sidebar"),m=[];n.__esModule=!0,n.default={setTitle:i,linkify:o,focusOnEnter:r,clickOnEnter:a,clickOnCtrlEnter:s,showMenuByClick:l,getURLParameter:u,limitTextArea:d,enableScrollTop:c,removeServerSideParsleyError:f,scrollToRandomSong:p,scrollToBlock:v,playYoutube:y.default.playYoutube,initSidebar:b.default.initSidebar}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./links":2,"./sidebar":4}],7:[function(e,t,n){(function(t){"use strict";function i(e){for(var t={couplets:[]},n=null,i=e.split("\n"),o=0;o<i.length;o++){var r=i[o];if(0!=r.trim().length){null==n&&(n={lines:[]},t.couplets.push(n));var a={text:"",chords:[]};n.lines.push(a);for(var s=0,l=0;(l=r.indexOf("(",s))>=0;){var u=r.indexOf(")",l+1);if(u<0)break;var d=r.substring(l+1,u);a.text+=r.substring(s,l),a.chords.push({name:d,position:a.text.length}),s=u+1}a.text+=r.substring(s)}else n=null}return t}function o(e){return e&&e.length>0&&e.length<=7&&y[e.charAt(0)]}function r(e){if(0==e.chords.length)return e.text;for(var t="",n=0,i=0;i<e.chords.length;i++){var r=e.chords[i];t+=e.text.substring(n,r.position);var a=o(r.name),s=a?"#2b6e44":"blue",l=a?"":"title='Неподдерживаемый тип аккорда: аккорд не будет транспонироваться.'";t+="<sup style='color:"+s+";' "+l+">"+r.name+"</sup>",n=r.position}return t+=e.text.substring(n)}function a(e,t){for(var n=0,i=0;i<e.couplets.length;i++){var o=e.couplets[i];n+=o.lines.length}n>b&&t.addClass("song-text-2-cols")}function s(e){var t=f(e.targetSelector),n=e.textViewMode&&"Hidden"!=e.textViewMode?p.Visible:p.Hidden;if(n==p.Hidden)return void t.html("");for(var o=e.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),s=e.chordsMode&&"Hidden"!=e.chordsMode?c.Inlined:c.Hidden,l=s==c.Inlined,d=i(o),h="",v=0;v<d.couplets.length;v++){for(var g=d.couplets[v],w=0;w<g.lines.length;w++){var y=g.lines[w];h+=l?r(y):y.text,h+="\n"}h+="\n"}t.html(h),a(d,t),u(t)}function l(e){return e&&e>=g&&e<=w}function u(e){var t=JSON.parse(h.default.get(v)),n=l(t.zoom)?t.zoom:100;e.removeAttr("style"),e.attr("style","font-size: "+n+"%;")}function d(e){if(e.delta||l(e.value)){var t=JSON.parse(h.default.get(v)),n=l(t.zoom)?t.zoom:100;t.zoom=e.delta?n+e.delta:e.value,l(t.zoom)&&(h.default.set(v,JSON.stringify(t)),u(f(".song-text")))}}var c,f="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,h=e("./cookies");!function(e){e[e.Inlined=0]="Inlined",e[e.Hidden=1]="Hidden"}(c||(c={}));var p;!function(e){e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden"}(p||(p={}));var v="song-view",g=50,w=200,y={A:!0,B:!0,C:!0,D:!0,E:!0,F:!0,G:!0,H:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0,g:!0,h:!0},b=24;n.__esModule=!0,n.default={TextViewMode:p,ChordsViewMode:c,renderSong:s,zoom:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cookies":1}],8:[function(e,t,n){(function(t){"use strict";function i(e){return new s(e)}var o="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,r=e("./cookies"),a="tuner",s=function(){function e(t){var n=this;this.buttons=[],this.stopped=!1,this.$el=o(t.selector),this.$repeat=this.$el.find(".tuner-repeat-checkbox"),this.$toneTypeSelector=this.$el.find(".tuner-tone-type-selector"),this.readLastState();var i=this.$toneTypeSelector.val();this.tonesPath=t.tonesPath?t.tonesPath:"/tones";for(var r,a=function(t){if(r=s.$el.find(".tuner-button-s"+t),r.length<=0)return"continue";var o={$el:r,audio:document.createElement("audio"),toneIdx:t};o.audio.setAttribute("src",s.tonesPath+"/"+i+t+".mp3"),o.$el.click(function(){o.audio.paused?n.play(o):n.stop()}),s.registerAudio(o),s.buttons.push(o),e.updateButtonUI(o),s.lastPlayed=s.lastPlayed?s.lastPlayed:o},s=this,l=1;l<=6;l++)a(l);this.$toneTypeSelector.change(function(){return n.updateActiveTone()}),this.$repeat.change(function(){return n.saveState()}),o(document).keydown(function(e){n.$el.is(":visible")&&(e.which>=49&&e.which<=54?n.$el.find(".tuner-button-s"+String.fromCharCode(e.which)).click():37==e.which||90==e.which||122==e.which?n.playPrev():39==e.which||88==e.which||120==e.which?n.playNext():32==e.which||67==e.which||99==e.which?n.togglePlay():86==e.which||118==e.which||48==e.which||45==e.which||96==e.which?n.$repeat.click():38!=e.which&&40!=e.which&&66!=e.which&&98!=e.which||n.nextTone())})}return e.prototype.updateActiveTone=function(){for(var e=this.$toneTypeSelector.val(),t=0;t<this.buttons.length;t++){var n=this.buttons[t];n.audio.remove(),n.audio=document.createElement("audio"),n.audio.setAttribute("src",this.tonesPath+"/"+e+n.toneIdx+".mp3"),this.registerAudio(n)}this.saveState()},e.prototype.registerAudio=function(t){var n=this;t.audio.addEventListener("pause",function(){e.updateButtonUI(t)}),t.audio.addEventListener("playing",function(){e.updateButtonUI(t)}),t.audio.addEventListener("ended",function(){return n.$repeat.is(":checked")&&!n.stopped&&n.$el.is(":visible")?void n.play(t):void e.updateButtonUI(t)})},e.prototype.stop=function(){this.stopped=!0,this.pauseAll()},e.prototype.pauseAll=function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];t.audio.pause()}},e.prototype.play=function(e){this.pauseAll(),e.audio.currentTime=0,this.stopped=!1,e.audio.play(),this.lastPlayed=e},e.prototype.togglePlay=function(){this.lastPlayed.audio.paused?this.play(this.lastPlayed):this.stop()},e.prototype.playPrev=function(){for(var e,t=this.lastPlayed.toneIdx,n=0;n<this.buttons.length;n++){var i=this.buttons[n];i.toneIdx<t&&(!e||i.toneIdx>e.toneIdx)&&(e=i)}e=e?e:this.buttons[this.buttons.length-1],this.play(e)},e.prototype.playNext=function(){for(var e,t=this.lastPlayed.toneIdx,n=0;n<this.buttons.length;n++){var i=this.buttons[n];i.toneIdx>t&&(!e||i.toneIdx<e.toneIdx)&&(e=i)}e=e?e:this.buttons[0],this.play(e)},e.prototype.nextTone=function(){var e=this.$toneTypeSelector.find("option:selected"),t=e.next();0==t.length&&(t=this.$toneTypeSelector.find("option").first()),e.prop("selected",!1),t.prop("selected",!0),this.updateActiveTone()},e.updateButtonUI=function(e){e.$el.removeClass(e.audio.paused?"tuner-button-on":"tuner-button-off"),e.$el.addClass(e.audio.paused?"tuner-button-off":"tuner-button-on")},e.prototype.saveState=function(){var e={tone:this.$toneTypeSelector.val(),repeat:this.$repeat.prop("checked")},t=JSON.stringify(e);r.default.set(a,t)},e.prototype.readLastState=function(){var e=r.default.get(a),t=JSON.parse(e);this.$repeat.prop("checked",1==t.repeat),this.$toneTypeSelector.val(t.tone?t.tone:"c")},e}();n.__esModule=!0,n.default={init:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cookies":1}],9:[function(e,t,n){"use strict";var i=e("./api/site-def");e("./api/parsley-translations");var o=e("./api/site-utils"),r=e("./api/song-view"),a=e("./api/tuner");i.default.Tuner=a.default,i.default.Utils=o.default,i.default.SongView=r.default,window.$site=i.default},{"./api/parsley-translations":3,"./api/site-def":5,"./api/site-utils":6,"./api/song-view":7,"./api/tuner":8}],10:[function(e,t,n){},{}]},{},[9,10]);