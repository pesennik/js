!function t(e,n,i){function o(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){"use strict";function i(t){var e="https://www.youtube.com/embed/"+t.id+"?autoplay=1&autohide=1";$(t).data("params")&&(e+="&"+$(this).data("params"));var n=$("<iframe/>",{frameborder:"0",src:e,width:$(t).width(),height:$(t).height()});n.attr("allowfullscreen","allowfullscreen"),$(t).replaceWith(n)}function o(t){if(!t||0==t.length)return null;0==t.indexOf("www.")&&(t=t.substring(4)),t=t.toLocaleLowerCase();for(var e=0;e<d.length;e++){var n=d[e];if(0==t.indexOf(n.urlPrefix))return n}return null}function r(t,e){var n=o(t);if(null==n)return null;var i=n(t.substr(n.urlPrefix.length));if(!i)return e;var r="background-image: url(https://img.youtube.com/vi/"+i+"/mqdefault.jpg);";return"<div id='"+i+"' class='youtube' style='"+r+"' onclick='$site.Utils.playYoutube(this);'><div class='play'></div></div>"}function a(t){var e=t.toLocaleLowerCase(),n=t;0==e.indexOf("http://")?n=t.substr(7):0==e.indexOf("https://")&&(n=t.substr(8));var i=n.toLocaleLowerCase(),a=i.split(".").pop();return a in s?"<a href='"+t+"' target='_blank'><img src='"+t+"' style='max-width: 400px; max-height: 300px;'></a>":null!=o(n)?r(n,null):null}function u(t){for(var e=t,n=e.indexOf("<a href=");n>=0;){var i=e.indexOf("</a>",n);if(i<0)break;var o=n+9,r=e.indexOf('"',o+1);if(r>0){var u=e.substring(o,r),s=a(u);null!=s&&(e=e.substring(0,n)+s+e.substring(i+4),i=n+s.length)}n=e.indexOf("<a href=",i)}return e}var s={};s.png=!0,s.jpg=!0,s.gif=!0;var l=function(t){var e=/v=([^&]+)/.exec(t)[1];return e?e:null};l.urlPrefix="youtube.com/watch";var c=function(t){var e=t.indexOf("/");if(e<0)return t;if(e>0)return t.substring(0,e);t=t.substr(1);var n=t.indexOf("/");return n<0?t:t.substr(0,n)};c.urlPrefix="youtu.be";var d=[l,c];n.__esModule=!0,n["default"]={processMediaLinks:u,playYoutube:i}},{}],2:[function(t,e,n){window.Parsley&&(window.Parsley.addMessages("ru",{defaultMessage:"Некорректное значение.",type:{email:"Введите адрес электронной почты.",url:"Введите URL адрес.",number:"Введите число.",integer:"Введите целое число.",digits:"Введите только цифры.",alphanum:"Введите буквенно-цифровое значение."},notblank:"Это поле должно быть заполнено.",required:"Обязательное поле.",pattern:"Это значение некорректно.",min:"Это значение должно быть не менее чем %s.",max:"Это значение должно быть не более чем %s.",range:"Это значение должно быть от %s до %s.",minlength:"Это значение должно содержать не менее %s символов.",maxlength:"Это значение должно содержать не более %s символов.",length:"Это значение должно содержать от %s до %s символов.",mincheck:"Выберите не менее %s значений.",maxcheck:"Выберите не более %s значений.",check:"Выберите от %s до %s значений.",equalto:"Это значение должно совпадать."}),window.Parsley.setLocale("ru"))},{}],3:[function(t,e,n){"use strict";n.__esModule=!0,n["default"]={Tuner:void 0,Utils:void 0}},{}],4:[function(t,e,n){(function(e){"use strict";function i(t,e,n){n=n?n:window.document.body,v(n).find(t).each(function(){v(this).attr("title")||v(this).attr("title",e)})}function o(t,e){var n=new y({urls:{schemeMatches:!0,wwwMatches:!0,tldMatches:!0},email:!0,phone:!0,twitter:!1,hashtag:!1,stripPrefix:!0,newWindow:!0,truncate:{length:60,location:"end"},className:""}),i=n.link(t);if(e&&e.skipMediaLinks)return i;try{return w["default"].processMediaLinks(i)}catch(o){return log.error(o),i}}function r(t,e){13===t.which&&(v(e).focus(),t.preventDefault())}function a(t,e){var n=t.which?t.which:t.keyCode;10!==n&&13!==n||t.ctrlKey||(v(e).click(),t.preventDefault())}function u(t,e){var n=t.which?t.which:t.keyCode;10!==n&&13!==n||!t.ctrlKey||(v(e).click(),t.preventDefault())}function s(t,e){var n=t?t:window.event;return n&&n.stopPropagation&&n.stopPropagation(),n&&n.cancelBubble&&(n.cancelBubble=!0),v("#"+e).dropdown("toggle"),!1}function l(t){var e=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)");return decodeURIComponent((e.exec(location.search)||[void 0,""])[1].replace(/\+/g,"%20"))||void 0}function c(t,e,n,i,o){var r=function(){var r=i-t.val().length;r<=o?e.html(""+r):e.html(""),r<0?(e.css("color","red"),n&&n.attr("disabled","")):(e.css("color","inherit"),n&&n.removeAttr("disabled"))};t.keyup(r),r()}function d(){v(document).ready(function(){var t=v("#back-top");t&&(t.hide(),v(function(){v(window).scroll(function(){v(this).scrollTop()>100?v("#back-top").fadeIn():v("#back-top").fadeOut()}),v("#back-top").find("a").click(function(){return v("body,html").animate({scrollTop:0},500),!1})}))})}function f(t){if("number"==typeof t.selectionStart)t.selectionStart=t.selectionEnd=t.value.length;else if("undefined"!=typeof t.createTextRange){t.focus();var e=t.createTextRange();e.collapse(!1),e.select()}}function h(t,e,n,i,o){var r=document.getElementById(n);if(r){var a=r.getAttribute("utc-date");if(a){var u=Date.parse(a);if(u){var s=document.getElementById(i),l=u-(new Date).getTime();if(l<=0)return void(s.innerHTML=e(0,0));var c=6e4,d=60*c,f=parseInt(""+l/d,10),p=parseInt(""+Math.round((l-f*d)/c),10);s.innerHTML=e(f,p),setTimeout(function(){h(t,e,n,i,o)},1e3*t)}}}}function p(t){var e=v(t).parsley();e.removeError("server-side-parsley-error")}var v="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null,y="undefined"!=typeof window?window.Autolinker:"undefined"!=typeof e?e.Autolinker:null,w=t("./links");n.__esModule=!0,n["default"]={setTitle:i,linkify:o,focusOnEnter:r,clickOnEnter:a,clickOnCtrlEnter:u,showMenuByClick:s,getURLParameter:l,limitTextArea:c,enableScrollTop:d,moveCaretToEnd:f,countdown:h,removeServerSideParsleyError:p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./links":1}],5:[function(t,e,n){(function(t){"use strict";function e(t,e){document.cookie=t+"="+e+";expires=Fri, 31 Dec 9999 23:59:59 GMT"}function i(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return e?e[2]:"{}"}function o(t){return new a(t)}var r="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,a=function(){function t(e){var n=this;this.buttons=[],this.stopped=!1,this.$el=r(e.selector),this.$repeat=this.$el.find(".tuner-repeat-checkbox"),this.$toneTypeSelector=this.$el.find(".tuner-tone-type-selector"),this.readLastState();var i=this.$toneTypeSelector.val();this.tonesPath=e.tonesPath?e.tonesPath:"/tones";for(var o,a=function(e){if(o=u.$el.find(".tuner-button-s"+e),o.length<=0)return"continue";var r={$el:o,audio:document.createElement("audio"),toneIdx:e};r.audio.setAttribute("src",u.tonesPath+"/"+i+e+".mp3"),r.$el.click(function(){r.audio.paused?n.play(r):n.stop()}),u.registerAudio(r),u.buttons.push(r),t.updateButtonUI(r),u.lastPlayed=u.lastPlayed?u.lastPlayed:r},u=this,s=1;s<=6;s++){a(s)}this.$toneTypeSelector.change(function(){return n.updateActiveTone()}),this.$repeat.change(function(){return n.saveState()}),r(document).keydown(function(t){t.which>=49&&t.which<=54?n.$el.find(".tuner-button-s"+String.fromCharCode(t.which)).click():37==t.which||90==t.which||122==t.which?n.playPrev():39==t.which||88==t.which||120==t.which?n.playNext():32==t.which||67==t.which||99==t.which?n.togglePlay():86==t.which||118==t.which||48==t.which||45==t.which||96==t.which?n.$repeat.click():38!=t.which&&40!=t.which&&66!=t.which&&98!=t.which||n.nextTone()})}return t.prototype.updateActiveTone=function(){var t=this.$toneTypeSelector.val();console.log("active tone: "+t);for(var e=0;e<this.buttons.length;e++){var n=this.buttons[e];n.audio.remove(),n.audio=document.createElement("audio"),n.audio.setAttribute("src",this.tonesPath+"/"+t+n.toneIdx+".mp3"),this.registerAudio(n)}this.saveState()},t.prototype.registerAudio=function(e){var n=this;e.audio.addEventListener("pause",function(){t.updateButtonUI(e)}),e.audio.addEventListener("playing",function(){t.updateButtonUI(e)}),e.audio.addEventListener("ended",function(){return n.$repeat.is(":checked")&&!n.stopped?void n.play(e):void t.updateButtonUI(e)})},t.prototype.stop=function(){this.stopped=!0,this.pauseAll()},t.prototype.pauseAll=function(){for(var t=0;t<this.buttons.length;t++){var e=this.buttons[t];e.audio.pause()}},t.prototype.play=function(t){this.pauseAll(),t.audio.currentTime=0,this.stopped=!1,t.audio.play(),this.lastPlayed=t},t.prototype.togglePlay=function(){this.lastPlayed.audio.paused?this.play(this.lastPlayed):this.stop()},t.prototype.playPrev=function(){for(var t,e=this.lastPlayed.toneIdx,n=0;n<this.buttons.length;n++){var i=this.buttons[n];i.toneIdx<e&&(!t||i.toneIdx>t.toneIdx)&&(t=i)}t=t?t:this.buttons[this.buttons.length-1],this.play(t)},t.prototype.playNext=function(){for(var t,e=this.lastPlayed.toneIdx,n=0;n<this.buttons.length;n++){var i=this.buttons[n];i.toneIdx>e&&(!t||i.toneIdx<t.toneIdx)&&(t=i)}t=t?t:this.buttons[0],this.play(t)},t.prototype.nextTone=function(){var t=this.$toneTypeSelector.find("option:selected"),e=t.next();0==e.length&&(e=this.$toneTypeSelector.find("option").first()),t.prop("selected",!1),e.prop("selected",!0),this.updateActiveTone()},t.updateButtonUI=function(t){t.$el.removeClass(t.audio.paused?"tuner-button-on":"tuner-button-off"),t.$el.addClass(t.audio.paused?"tuner-button-off":"tuner-button-on")},t.prototype.saveState=function(){var t={tone:this.$toneTypeSelector.val(),repeat:this.$repeat.prop("checked")},n=JSON.stringify(t);e("tuner",n)},t.prototype.readLastState=function(){var t=i("tuner"),e=JSON.parse(t);this.$repeat.prop("checked",1==e.repeat),this.$toneTypeSelector.val(e.tone?e.tone:"c")},t}();n.__esModule=!0,n["default"]={init:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){"use strict";var i=t("./api/site-def");t("./api/parsley-translations");var o=t("./api/site-utils"),r=t("./api/tuner");i["default"].Tuner=r["default"],i["default"].Utils=o["default"],window.$site=i["default"]},{"./api/parsley-translations":2,"./api/site-def":3,"./api/site-utils":4,"./api/tuner":5}],7:[function(t,e,n){},{}]},{},[6,7]);