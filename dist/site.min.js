!function e(t,n,o){function i(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";function o(e){var t="https://www.youtube.com/embed/"+e.id+"?autoplay=1&autohide=1";$(e).data("params")&&(t+="&"+$(this).data("params"));var n=$("<iframe/>",{frameborder:"0",src:t,width:$(e).width(),height:$(e).height()});n.attr("allowfullscreen","allowfullscreen"),$(e).replaceWith(n)}function i(e){if(!e||0==e.length)return null;0==e.indexOf("www.")&&(e=e.substring(4)),e=e.toLocaleLowerCase();for(var t=0;t<d.length;t++){var n=d[t];if(0==e.indexOf(n.urlPrefix))return n}return null}function r(e,t){var n=i(e);if(null==n)return null;var o=n(e.substr(n.urlPrefix.length));if(!o)return t;var r="background-image: url(https://img.youtube.com/vi/"+o+"/mqdefault.jpg);";return"<div id='"+o+"' class='youtube' style='"+r+"' onclick='$site.Utils.playYoutube(this);'><div class='play'></div></div>"}function a(e){var t=e.toLocaleLowerCase(),n=e;0==t.indexOf("http://")?n=e.substr(7):0==t.indexOf("https://")&&(n=e.substr(8));var o=n.toLocaleLowerCase(),a=o.split(".").pop();return a in s?"<a href='"+e+"' target='_blank'><img src='"+e+"' style='max-width: 400px; max-height: 300px;'></a>":null!=i(n)?r(n,null):null}function u(e){for(var t=e,n=t.indexOf("<a href=");n>=0;){var o=t.indexOf("</a>",n);if(o<0)break;var i=n+9,r=t.indexOf('"',i+1);if(r>0){var u=t.substring(i,r),s=a(u);null!=s&&(t=t.substring(0,n)+s+t.substring(o+4),o=n+s.length)}n=t.indexOf("<a href=",o)}return t}var s={};s.png=!0,s.jpg=!0,s.gif=!0;var l=function(e){var t=/v=([^&]+)/.exec(e)[1];return t?t:null};l.urlPrefix="youtube.com/watch";var c=function(e){var t=e.indexOf("/");if(t<0)return e;if(t>0)return e.substring(0,t);e=e.substr(1);var n=e.indexOf("/");return n<0?e:e.substr(0,n)};c.urlPrefix="youtu.be";var d=[l,c];n.__esModule=!0,n["default"]={processMediaLinks:u,playYoutube:o}},{}],2:[function(e,t,n){window.Parsley&&(window.Parsley.addMessages("ru",{defaultMessage:"Некорректное значение.",type:{email:"Введите адрес электронной почты.",url:"Введите URL адрес.",number:"Введите число.",integer:"Введите целое число.",digits:"Введите только цифры.",alphanum:"Введите буквенно-цифровое значение."},notblank:"Это поле должно быть заполнено.",required:"Обязательное поле.",pattern:"Это значение некорректно.",min:"Это значение должно быть не менее чем %s.",max:"Это значение должно быть не более чем %s.",range:"Это значение должно быть от %s до %s.",minlength:"Это значение должно содержать не менее %s символов.",maxlength:"Это значение должно содержать не более %s символов.",length:"Это значение должно содержать от %s до %s символов.",mincheck:"Выберите не менее %s значений.",maxcheck:"Выберите не более %s значений.",check:"Выберите от %s до %s значений.",equalto:"Это значение должно совпадать."}),window.Parsley.setLocale("ru"))},{}],3:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]={Tuner:void 0,Utils:void 0,SongView:void 0}},{}],4:[function(e,t,n){(function(t){"use strict";function o(e,t,n){n=n?n:window.document.body,v(n).find(e).each(function(){v(this).attr("title")||v(this).attr("title",t)})}function i(e,t){var n=new w({urls:{schemeMatches:!0,wwwMatches:!0,tldMatches:!0},email:!0,phone:!0,twitter:!1,hashtag:!1,stripPrefix:!0,newWindow:!0,truncate:{length:60,location:"end"},className:""}),o=n.link(e);if(t&&t.skipMediaLinks)return o;try{return y["default"].processMediaLinks(o)}catch(i){return log.error(i),o}}function r(e,t){13===e.which&&(v(t).focus(),e.preventDefault())}function a(e,t){var n=e.which?e.which:e.keyCode;10!==n&&13!==n||e.ctrlKey||(v(t).click(),e.preventDefault())}function u(e,t){var n=e.which?e.which:e.keyCode;10!==n&&13!==n||!e.ctrlKey||(v(t).click(),e.preventDefault())}function s(e,t){var n=e?e:window.event;return n&&n.stopPropagation&&n.stopPropagation(),n&&n.cancelBubble&&(n.cancelBubble=!0),v("#"+t).dropdown("toggle"),!1}function l(e){var t=new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)");return decodeURIComponent((t.exec(location.search)||[void 0,""])[1].replace(/\+/g,"%20"))||void 0}function c(e,t,n,o,i){var r=function(){var r=o-e.val().length;r<=i?t.html(""+r):t.html(""),r<0?(t.css("color","red"),n&&n.attr("disabled","")):(t.css("color","inherit"),n&&n.removeAttr("disabled"))};e.keyup(r),r()}function d(){v(document).ready(function(){var e=v("#back-top");e&&(e.hide(),v(function(){v(window).scroll(function(){v(this).scrollTop()>100?v("#back-top").fadeIn():v("#back-top").fadeOut()}),v("#back-top").find("a").click(function(){return v("body,html").animate({scrollTop:0},500),!1})}))})}function f(e){if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}}function h(e){var t=v(e).parsley();t.removeError("server-side-parsley-error")}function p(){var e=v(".song-block"),t=e.length;if(0!=t){var n=-1;do n=Math.floor(Math.random()*t);while(n==g&&t>1);g=n;var o=v(e.get(n)),i=o.offset();v("html, body").animate({scrollTop:i.top})}}var v="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,w="undefined"!=typeof window?window.Autolinker:"undefined"!=typeof t?t.Autolinker:null,y=e("./links"),g=-1;n.__esModule=!0,n["default"]={setTitle:o,linkify:i,focusOnEnter:r,clickOnEnter:a,clickOnCtrlEnter:u,showMenuByClick:s,getURLParameter:l,limitTextArea:c,enableScrollTop:d,moveCaretToEnd:f,removeServerSideParsleyError:h,scrollToRandomSong:p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./links":1}],5:[function(e,t,n){(function(e){"use strict";function t(e){for(var t={couplets:[]},n=null,o=e.split("\n"),i=0;i<o.length;i++){var r=o[i];if(0!=r.trim().length){null==n&&(n={lines:[]},t.couplets.push(n));var a={text:"",chords:[]};n.lines.push(a);for(var u=0,s=0;(s=r.indexOf("(",u))>=0;){var l=r.indexOf(")",s+1);if(l<0)break;var c=r.substring(s+1,l);a.text+=r.substring(u,s),a.chords.push({name:c,position:a.text.length}),u=l+1}a.text+=r.substring(u)}else n=null}return t}function o(e){return"NoChords"==e?a.NoChords:a.Inlined}function i(e){if(0==e.chords.length)return e.text;for(var t="",n=0,o=0;o<e.chords.length;o++){var i=e.chords[o];t+=e.text.substring(n,i.position),t+="<sup style='color:#2b6e44'>"+i.name+"</sup>",n=i.position}return t+=e.text.substring(n)}function r(e){for(var n=e.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=o(e.chordsMode),s=r==a.Inlined,l=t(n),c="",d=0;d<l.couplets.length;d++){for(var f=l.couplets[d],h=0;h<f.lines.length;h++){var p=f.lines[h];c+=s?i(p):p.text,c+="\n"}c+="\n"}u(e.targetSelector).html(c)}var a,u="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null;!function(e){e[e.Inlined=0]="Inlined",e[e.NoChords=1]="NoChords"}(a||(a={})),n.__esModule=!0,n["default"]={renderSong:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(e){"use strict";function t(e,t){document.cookie=e+"="+t+";expires=Fri, 31 Dec 9999 23:59:59 GMT"}function o(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:"{}"}function i(e){return new a(e)}var r="undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null,a=function(){function e(t){var n=this;this.buttons=[],this.stopped=!1,this.$el=r(t.selector),this.$repeat=this.$el.find(".tuner-repeat-checkbox"),this.$toneTypeSelector=this.$el.find(".tuner-tone-type-selector"),this.readLastState();var o=this.$toneTypeSelector.val();this.tonesPath=t.tonesPath?t.tonesPath:"/tones";for(var i,a=function(t){if(i=u.$el.find(".tuner-button-s"+t),i.length<=0)return"continue";var r={$el:i,audio:document.createElement("audio"),toneIdx:t};r.audio.setAttribute("src",u.tonesPath+"/"+o+t+".mp3"),r.$el.click(function(){r.audio.paused?n.play(r):n.stop()}),u.registerAudio(r),u.buttons.push(r),e.updateButtonUI(r),u.lastPlayed=u.lastPlayed?u.lastPlayed:r},u=this,s=1;s<=6;s++){a(s)}this.$toneTypeSelector.change(function(){return n.updateActiveTone()}),this.$repeat.change(function(){return n.saveState()}),r(document).keydown(function(e){e.which>=49&&e.which<=54?n.$el.find(".tuner-button-s"+String.fromCharCode(e.which)).click():37==e.which||90==e.which||122==e.which?n.playPrev():39==e.which||88==e.which||120==e.which?n.playNext():32==e.which||67==e.which||99==e.which?n.togglePlay():86==e.which||118==e.which||48==e.which||45==e.which||96==e.which?n.$repeat.click():38!=e.which&&40!=e.which&&66!=e.which&&98!=e.which||n.nextTone()})}return e.prototype.updateActiveTone=function(){for(var e=this.$toneTypeSelector.val(),t=0;t<this.buttons.length;t++){var n=this.buttons[t];n.audio.remove(),n.audio=document.createElement("audio"),n.audio.setAttribute("src",this.tonesPath+"/"+e+n.toneIdx+".mp3"),this.registerAudio(n)}this.saveState()},e.prototype.registerAudio=function(t){var n=this;t.audio.addEventListener("pause",function(){e.updateButtonUI(t)}),t.audio.addEventListener("playing",function(){e.updateButtonUI(t)}),t.audio.addEventListener("ended",function(){return n.$repeat.is(":checked")&&!n.stopped?void n.play(t):void e.updateButtonUI(t)})},e.prototype.stop=function(){this.stopped=!0,this.pauseAll()},e.prototype.pauseAll=function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];t.audio.pause()}},e.prototype.play=function(e){this.pauseAll(),e.audio.currentTime=0,this.stopped=!1,e.audio.play(),this.lastPlayed=e},e.prototype.togglePlay=function(){this.lastPlayed.audio.paused?this.play(this.lastPlayed):this.stop()},e.prototype.playPrev=function(){for(var e,t=this.lastPlayed.toneIdx,n=0;n<this.buttons.length;n++){var o=this.buttons[n];o.toneIdx<t&&(!e||o.toneIdx>e.toneIdx)&&(e=o)}e=e?e:this.buttons[this.buttons.length-1],this.play(e)},e.prototype.playNext=function(){for(var e,t=this.lastPlayed.toneIdx,n=0;n<this.buttons.length;n++){var o=this.buttons[n];o.toneIdx>t&&(!e||o.toneIdx<e.toneIdx)&&(e=o)}e=e?e:this.buttons[0],this.play(e)},e.prototype.nextTone=function(){var e=this.$toneTypeSelector.find("option:selected"),t=e.next();0==t.length&&(t=this.$toneTypeSelector.find("option").first()),e.prop("selected",!1),t.prop("selected",!0),this.updateActiveTone()},e.updateButtonUI=function(e){e.$el.removeClass(e.audio.paused?"tuner-button-on":"tuner-button-off"),e.$el.addClass(e.audio.paused?"tuner-button-off":"tuner-button-on")},e.prototype.saveState=function(){var e={tone:this.$toneTypeSelector.val(),repeat:this.$repeat.prop("checked")},n=JSON.stringify(e);t("tuner",n)},e.prototype.readLastState=function(){var e=o("tuner"),t=JSON.parse(e);this.$repeat.prop("checked",1==t.repeat),this.$toneTypeSelector.val(t.tone?t.tone:"c")},e}();n.__esModule=!0,n["default"]={init:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){"use strict";var o=e("./api/site-def");e("./api/parsley-translations");var i=e("./api/site-utils"),r=e("./api/song-view"),a=e("./api/tuner");o["default"].Tuner=a["default"],o["default"].Utils=i["default"],o["default"].SongView=r["default"],window.$site=o["default"]},{"./api/parsley-translations":2,"./api/site-def":3,"./api/site-utils":4,"./api/song-view":5,"./api/tuner":6}],8:[function(e,t,n){},{}]},{},[7,8]);